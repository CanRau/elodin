import { make as DocLayout } from '../../../../components/DocLayout.bs.js'

export default DocLayout

# CSS in Reason

This generator is used with ReasonML when building for the web.<br />
Static styles are extracted to CSS files during compilation.<br/>
It uses [bs-css]() under the hood to resolve dynamic styles.

It renders styles to functions which can be called with variables and variants in order to resolve them.<br />
Variants are rendered to native ReasonML variants.

## Configuration

| Option                 | Type        | Default                                                                 | Description                                                    |
| ---------------------- | ----------- | ----------------------------------------------------------------------- | -------------------------------------------------------------- |
| devMode                | Boolean     | `false`                                                                 | Enables readable class names                                   |
| rootNode               | HTMLElement | `body`                                                                  | CSS selector to apply root reset style to (see below)          |
| generateFileName       | Function    | `(fileName, moduleName) => capitalize(fileName) + moduleName + "Style"` | Determines how the file names are generated                    |
| generateResetClassName | Function    | `type => "_elo_" + type`                                                | Determines how the reset class names are generated (see below) |

## Usage

**elodin.config.js**

```javascript
var createGenerator = require('@elodin/generator-reason').createGenerator

function capitalize(str) {
  return str.charAt(0).toUpperCase() + str.substr(1)
}

const config = {
  devMode: true,
  rootNode: '#__next',
  generateFileName: (fileName, moduleName) =>
    'Elodin' + capitalize(fileName) + moduleName,
  generateResetClassName: type => '__ELODIN_' + type.toUpperCase(),
}
module.exports = {
  ...elodinConfig,
  generator: createGenerator(config),
}
```

## Resets

The generator provides two important resets that should be added to your document head in order to correctly render Elodin styles.

### Usage

```javascript
import { generator } from './elodin.config.js'

function appendStyle(css) {
  const style = document.createElement('style')
  style.textContent = css

  document.head.appendChild(style)
}

appendStyle(generator.baseReset)
appendStyle(generator.rootReset)
```

### baseReset

The baseReset provides component resets for both `view` and `text` styles.

### rootReset

The rootReset enables your app root to act like a fixed flex container. It applies to the provided `rootNode` selector.

## Feature Coverage

- Styles
- Primitives
- Variables
- Variants
- Conditionals
- Functions

It also implements special environment conditions to cover pseudo classes and media queries:

### Pseudo Classes

- link
- hover
- focus
- active
- visited
- checked
- default
- empty
- enabled
- first
- disabled
- focusWithin
- firstChild
- lastChild
- firstOfType
- intermediate
- inRange
- invalid
- lastOfType
- left
- onlyChild
- onlyOfType
- optional
- readOnly
- readWrite
- required
- right
- target
- valid
- visited

### Media Queries

- viewportWidth
- viewportHeight

## Example

**Button.elo**

```elo
variant Variant {
  Primary
  Secondary
}

view Button {
  paddingLeft: 10
  paddingRight: 10
  minWidth: $minWidth

  [Variant=Primary] {
    backgroundColor: blue

    [@hover] {
      backgroundColor: lightblue
    }
  }

  [Variant=Secondary] {
    backgroundColor: red

    [@hover] {
      backgroundColor: lightred
    }
  }

  [@viewportWidth>=1024] {
    paddingLeft: 15
    paddingRight: 15
  }
}
```

**Button.re**

```reason
[@react.component]
let make = (~children, ~minWidth=100 ~variant=ButtonStyle.Primary) =>
  <button className={ButtonStyle.button(~minWidth, ~variant, ())}>
    children
  </button>
```
